<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>VSTGUI: Create your own view for the WYSIWYG editor in VSTGUI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">VSTGUI
   &#160;<span id="projectnumber">4.10</span>
   </div>
   <div id="projectbrief">Graphical User Interface Framework not only for VST plugins</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('create_your_own_view.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Create your own view for the WYSIWYG editor in <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="create_your_own_view_intro"></a>
Introduction</h1>
<p>When you want to edit your own VST3 plugin. You can find the need to create your own View.</p>
<p>You can edit your plugin by doing "Right click &gt; Open UIDescription Editor"</p>
<div class="image">
<img src="editVST3.png" alt="editVST3.png"/>
<div class="caption">
Edit VST3 plugin</div></div>
<p> You can find more information about this interface in the documentation : "VSTGUI 4 &gt; VSTGUI &gt; New Inline UI Editor for VST3 (WYSIWYG) &gt; The Editor".</p>
<p>During this tutorial we will make a new view that will appear in the "Views Tab" at the bottom right of the editor and it allow us to drag and drop it inside our VST3 plugin.</p>
<h1><a class="anchor" id="create_your_own_view_createView"></a>
Create the new view class</h1>
<p>To create a new graphical view you need to create a class that inherites from <em>CView</em> or <em>CControl</em>. We recommend that you start with the <em>CControl</em> class when you plan to have an interactive view, otherwise if it only should display data use <em>CView</em>.</p>
<p>Your header file should look like this :</p>
<div class="fragment"><div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &quot;vstgui/vstgui.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span>VSTGUI {</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>MyControl : <span class="keyword">public</span> CControl</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    MyControl (<span class="keyword">const</span> CRect&amp; size );</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> draw (CDrawContext *pContext) <span class="keyword">override</span>;</div>
<div class="line"></div>
<div class="line">    CLASS_METHODS (MyControl, CControl)</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">} <span class="comment">// namespace VSTGUI</span></div>
</div><!-- fragment --><p>And your cpp file :</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;MyControl.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span>VSTGUI {</div>
<div class="line"></div>
<div class="line">MyControl::MyControl (<span class="keyword">const</span> CRect&amp; size) : CControl (size) {}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> MyControl::draw (CDrawContext* pContext)</div>
<div class="line">{</div>
<div class="line">--- setup the background rectangle</div>
<div class="line">    pContext-&gt;setLineWidth (1);</div>
<div class="line">    pContext-&gt;setFillColor (CColor (255, 255, 255, 255)); <span class="comment">// white background</span></div>
<div class="line">    pContext-&gt;setFrameColor (CColor (0, 0, 0, 255)); <span class="comment">// black borders</span></div>
<div class="line"></div>
<div class="line">--- draw the rect filled (with white) and stroked (line around rectangle)</div>
<div class="line">    pContext-&gt;drawRect (getViewSize (), kDrawFilledAndStroked);</div>
<div class="line"></div>
<div class="line">    setDirty (<span class="keyword">false</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">} <span class="comment">// namespace VSTGUI</span></div>
</div><!-- fragment --><p>We have two functions, the constructor which only calls the parent constructor and the <em>draw</em> function which will define the design of the view. In this example we draw a white rectangle with black borders.</p>
<h1><a class="anchor" id="create_your_own_view_registerView"></a>
Register your view</h1>
<p>So now you have a basic graphical view. But it will not appear in the list when you edit your plugin.</p>
<p>You need to create a new class, a "factory", that will register your view and create it. This class only needs a cpp file (if you strip dead code in your linker settings, then you need to make sure that this class is not stripped).</p>
<p>Let us begin by creating an empty class that inherites from *'ViewCreatorAdapter'* :</p>
<div class="fragment"><div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &quot;vstgui/vstgui.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;vstgui/vstgui_uidescription.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;vstgui/uidescription/detail/uiviewcreatorattributes.h&quot;</span></div>
<div class="line"></div>
<div class="line">Replace <span class="keyword">this</span> include by the header file of your <span class="keyword">new</span> view.</div>
<div class="line">#include <span class="stringliteral">&quot;MyControl.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span>VSTGUI {</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>MyControlFactory : <span class="keyword">public</span> ViewCreatorAdapter</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"></div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">} <span class="comment">// namespace VSTGUI</span></div>
</div><!-- fragment --><p>In the constructor we need to register our view to the UIViewFactory. If we don't do that it will not appear in the list that will allow us to add the view to our VST3 plugin.</p>
<div class="fragment"><div class="line">MyControlFactory () { UIViewFactory::registerViewCreator (*<span class="keyword">this</span>); }</div>
</div><!-- fragment --><p>The main factory needs 3 others functions :</p>
<p>The name of the view (as shown in the WYSIWYS editor)</p>
<div class="fragment"><div class="line"><a class="code" href="namespace_v_s_t_g_u_i.html#a21cc6afea0f23741f903db22fffdbe78" title="ID String pointer.">IdStringPtr</a> getViewName ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;Name of my UI component&quot;</span>; }</div>
</div><!-- fragment --><p>The parent class of the view (In this tutorial we're using <em>CControl</em>)</p>
<div class="fragment"><div class="line"><a class="code" href="namespace_v_s_t_g_u_i.html#a21cc6afea0f23741f903db22fffdbe78" title="ID String pointer.">IdStringPtr</a> getBaseViewName ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> UIViewCreator::kCControl; }</div>
</div><!-- fragment --><p>and a creator method which returns a new view with a default size</p>
<div class="fragment"><div class="line">CView* create (<span class="keyword">const</span> UIAttributes&amp; attributes, <span class="keyword">const</span> IUIDescription* description)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> MyControl (CRect (0, 0, 100, 100));</div>
<div class="line">}</div>
</div><!-- fragment --><p>You also need to create a static variable having the same type as our factory. This variable will call the constructor of your factory. Thus, your view will be registered automatically.</p>
<div class="fragment"><div class="line">MyControlFactory __gMyControlFactory;</div>
</div><!-- fragment --><p>So at the end you should have something like this :</p>
<div class="fragment"><div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#include &quot;vstgui/vstgui.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;vstgui/vstgui_uidescription.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;vstgui/uidescription/detail/uiviewcreatorattributes.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;MyControl.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span>VSTGUI {</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>MyControlFactory : <span class="keyword">public</span> ViewCreatorAdapter</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"><span class="keyword">register</span> <span class="keyword">this</span> <span class="keyword">class </span>with the view factory</div>
<div class="line">    MyControlFactory () { <a class="code" href="class_v_s_t_g_u_i_1_1_u_i_view_factory.html#aa8bd27c0b05d0759c648959863ad3cef">UIViewFactory::registerViewCreator</a> (*<span class="keyword">this</span>); }</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">return</span> an unique name here</div>
<div class="line">    <a class="code" href="namespace_v_s_t_g_u_i.html#a21cc6afea0f23741f903db22fffdbe78" title="ID String pointer.">IdStringPtr</a> getViewName ()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;Name of my UI component&quot;</span>; }</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">return</span> the name here from where your custom view inherites.</div>
<div class="line">Your view automatically supports the attributes from it.</div>
<div class="line">    <a class="code" href="namespace_v_s_t_g_u_i.html#a21cc6afea0f23741f903db22fffdbe78" title="ID String pointer.">IdStringPtr</a> getBaseViewName ()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> UIViewCreator::kCControl; }</div>
<div class="line"></div>
<div class="line">create your view here.</div>
<div class="line">Note you don<span class="stringliteral">&#39;t need to apply attributes here as</span></div>
<div class="line"><span class="stringliteral">the apply method will be called with this new view</span></div>
<div class="line"><span class="stringliteral">    CView* create (const UIAttributes&amp; attributes, const IUIDescription* description) const override</span></div>
<div class="line"><span class="stringliteral">    {</span></div>
<div class="line"><span class="stringliteral">        CRect size (CPoint (45, 45), CPoint (400, 150) );</span></div>
<div class="line"><span class="stringliteral">        return new MyControl (size);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral">};</span></div>
<div class="line"><span class="stringliteral">create a static instance so that it registers itself with the view factory</span></div>
<div class="line"><span class="stringliteral">MyControlFactory __gMyControlFactory;</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">} // namespace VSTGUI</span></div>
</div><!-- fragment --><h1><a class="anchor" id="create_your_own_view_result"></a>
Result</h1>
<p>Now if you come back to the VST 3 plugin Editor you can find your new view in the list.</p>
<div class="image">
<img src="newuicompname.png" alt="newuicompname.png"/>
<div class="caption">
Edit VST3 plugin</div></div>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="uidescription.html">Creating user interfaces</a></li>
    <li class="footer">Generated on Thu May 19 2022 16:50:03 for VSTGUI by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3 </li>
  </ul>
</div>
</body>
</html>
