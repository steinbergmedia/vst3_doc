<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VST 3 Interfaces: [3.0.1] Parameter MIDI Mapping Support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxysmtg.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VST 3 Interfaces
   &#160;<span id="projectnumber">VST 3.7</span>
   </div>
   <div id="projectbrief">SDK for developing VST plug-in</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('imidimappingsupport.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">[3.0.1] Parameter MIDI Mapping Support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>How the mapping works between MIDI CCs and parameters.</p>
<dl class="section user"><dt></dt><dd></dd></dl>
<p>MIDI Mapping interface: Vst::IMidiMapping.</p><ul>
<li>[plug imp]</li>
</ul>
<p>[extends IEditController]</p><ul>
<li>[released: 3.0.1]</li>
<li>[optional]</li>
</ul>
<p>MIDI controllers are not transmitted directly to a VST component. MIDI as hardware protocol has restrictions that can be avoided in software. Controller data in particular come along with unclear and often ignored semantics. On top of this they can interfere with regular parameter automation and the host is unaware of what happens in the plug-in when passing MIDI controllers directly.</p>
<p>So any functionality that is to be controlled by MIDI controllers must be exported as regular parameter. The host will transform incoming MIDI controller data using this interface and transmit them as regular parameter change. This allows the host to automate them in the same way as other parameters. CtrlNumber can be a typical MIDI controller value extended to some others values like pitchbend or aftertouch (see ControllerNumbers). If the mapping has changed, the plug-in must call IComponentHandler::restartComponent (kMidiCCAssignmentChanged) to inform the host about this change.</p>
<h1><a class="anchor" id="IMidiMappingExample"></a>
Example</h1>
<div class="fragment"><div class="line"><span class="comment">//--------------------------------------</span></div>
<div class="line"><span class="comment">// in myeditcontroller.h</span></div>
<div class="line"><span class="keyword">class </span>MyEditController: <span class="keyword">public</span> EditControllerEx1, <span class="keyword">public</span> IMidiMapping</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line">    <span class="comment">//---IMidiMapping---------------------------</span></div>
<div class="line">    <a class="codeRef" href="../base/namespaceSteinberg.html#a902761e005a6252e538c766de48fc957">tresult</a> PLUGIN_API getMidiControllerAssignment (<a class="codeRef" href="../base/namespaceSteinberg.html#a56f1a81c92849566ae864511088eb7e8">int32</a> busIndex, <a class="codeRef" href="../base/namespaceSteinberg.html#a4355d16fcf9f644c9ac84293f0b1801f">int16</a> channel, <a class="code" href="namespaceSteinberg_1_1Vst.html#aa67d0906fec66282a0c9488cb52162f6">CtrlNumber</a> midiControllerNumber, <a class="code" href="namespaceSteinberg_1_1Vst.html#a1dac5893f4a5c27f986d4e51741b544c">ParamID</a>&amp; <span class="keywordtype">id</span>) <a class="codeRef" href="../base/fplatform_8h.html#a3c5f727b2149b22fddea9edf2add04a8">SMTG_OVERRIDE</a>;</div>
<div class="line">    <span class="comment">//---Interface---------</span></div>
<div class="line">    OBJ_METHODS (MyEditController, EditControllerEx1)</div>
<div class="line">    DEFINE_INTERFACES</div>
<div class="line">        DEF_INTERFACE (IMidiMapping)</div>
<div class="line">    END_DEFINE_INTERFACES (MyEditController)</div>
<div class="line">    REFCOUNT_METHODS (MyEditController)</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">//--------------------------------------</span></div>
<div class="line"><span class="comment">// in myeditcontroller.cpp</span></div>
<div class="line"><a class="codeRef" href="../base/namespaceSteinberg.html#a902761e005a6252e538c766de48fc957">tresult</a> PLUGIN_API MyEditController::getMidiControllerAssignment (<a class="codeRef" href="../base/namespaceSteinberg.html#a56f1a81c92849566ae864511088eb7e8">int32</a> busIndex, <a class="codeRef" href="../base/namespaceSteinberg.html#a4355d16fcf9f644c9ac84293f0b1801f">int16</a> midiChannel, <a class="code" href="namespaceSteinberg_1_1Vst.html#aa67d0906fec66282a0c9488cb52162f6">CtrlNumber</a> midiControllerNumber, <a class="code" href="namespaceSteinberg_1_1Vst.html#a1dac5893f4a5c27f986d4e51741b544c">ParamID</a>&amp; tag)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// for my first Event bus and for MIDI channel 0 and for MIDI CC Volume only</span></div>
<div class="line">    <span class="keywordflow">if</span> (busIndex == 0 &amp;&amp; midiChannel == 0 &amp;&amp; midiControllerNumber == <a class="code" href="namespaceSteinberg_1_1Vst.html#a70ee68a13248febed5047cfa0fddf4e6a6a0386205b02a353f63eecc7b80688bd">kCtrlVolume</a>)</div>
<div class="line">    {</div>
<div class="line">        tag = kGainId;</div>
<div class="line">        <span class="keywordflow">return</span> <a class="codeRef" href="../base/namespaceSteinberg.html#a06fc87d81c62e9abb8790b6e5713c55ba9e60fad4624bee040985edebe1800372">kResultTrue</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <a class="codeRef" href="../base/namespaceSteinberg.html#a06fc87d81c62e9abb8790b6e5713c55bab954d2583eb15d3a762c5df29270f483">kResultFalse</a>;</div>
<div class="line">}</div>
</div><!-- fragment --><p> <br  />
<br  />
Back to <b><a class="el" href="index.html#vst3Contents">Contents</a></b> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="anamespaceSteinberg_1_1Vst_html_a70ee68a13248febed5047cfa0fddf4e6a6a0386205b02a353f63eecc7b80688bd"><div class="ttname"><a href="namespaceSteinberg_1_1Vst.html#a70ee68a13248febed5047cfa0fddf4e6a6a0386205b02a353f63eecc7b80688bd">Steinberg::Vst::kCtrlVolume</a></div><div class="ttdoc">Channel Volume (formerly Main Volume)</div><div class="ttdef"><b>Definition:</b> ivstmidicontrollers.h:34</div></div>
<div class="ttc" id="anamespaceSteinberg_html_a902761e005a6252e538c766de48fc957"><div class="ttname"><a href="../base/namespaceSteinberg.html#a902761e005a6252e538c766de48fc957">tresult</a></div><div class="ttdeci">int32 tresult</div></div>
<div class="ttc" id="anamespaceSteinberg_html_a56f1a81c92849566ae864511088eb7e8"><div class="ttname"><a href="../base/namespaceSteinberg.html#a56f1a81c92849566ae864511088eb7e8">int32</a></div><div class="ttdeci">int int32</div></div>
<div class="ttc" id="anamespaceSteinberg_html_a4355d16fcf9f644c9ac84293f0b1801f"><div class="ttname"><a href="../base/namespaceSteinberg.html#a4355d16fcf9f644c9ac84293f0b1801f">int16</a></div><div class="ttdeci">short int16</div></div>
<div class="ttc" id="anamespaceSteinberg_1_1Vst_html_aa67d0906fec66282a0c9488cb52162f6"><div class="ttname"><a href="namespaceSteinberg_1_1Vst.html#aa67d0906fec66282a0c9488cb52162f6">Steinberg::Vst::CtrlNumber</a></div><div class="ttdeci">int16 CtrlNumber</div><div class="ttdoc">MIDI controller number (see ControllerNumbers for allowed values)</div><div class="ttdef"><b>Definition:</b> vsttypes.h:76</div></div>
<div class="ttc" id="anamespaceSteinberg_html_a06fc87d81c62e9abb8790b6e5713c55bab954d2583eb15d3a762c5df29270f483"><div class="ttname"><a href="../base/namespaceSteinberg.html#a06fc87d81c62e9abb8790b6e5713c55bab954d2583eb15d3a762c5df29270f483">kResultFalse</a></div><div class="ttdeci">kResultFalse</div></div>
<div class="ttc" id="anamespaceSteinberg_html_a06fc87d81c62e9abb8790b6e5713c55ba9e60fad4624bee040985edebe1800372"><div class="ttname"><a href="../base/namespaceSteinberg.html#a06fc87d81c62e9abb8790b6e5713c55ba9e60fad4624bee040985edebe1800372">kResultTrue</a></div><div class="ttdeci">kResultTrue</div></div>
<div class="ttc" id="anamespaceSteinberg_1_1Vst_html_a1dac5893f4a5c27f986d4e51741b544c"><div class="ttname"><a href="namespaceSteinberg_1_1Vst.html#a1dac5893f4a5c27f986d4e51741b544c">Steinberg::Vst::ParamID</a></div><div class="ttdeci">uint32 ParamID</div><div class="ttdoc">parameter identifier</div><div class="ttdef"><b>Definition:</b> vsttypes.h:74</div></div>
<div class="ttc" id="afplatform_8h_html_a3c5f727b2149b22fddea9edf2add04a8"><div class="ttname"><a href="../base/fplatform_8h.html#a3c5f727b2149b22fddea9edf2add04a8">SMTG_OVERRIDE</a></div><div class="ttdeci">#define SMTG_OVERRIDE</div></div>
<html>
    <head>
	    <title>Empty</title>
	    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	    <meta name="Author" content="Steinberg">
    </head>
    <body>
    <br/>
    <hr width="100%" size="2" align="left" />
    <div align=right>
        Copyright &copy;2020 <a href="http://www.steinberg.net" target="_blank"><u>Steinberg Media Technologies GmbH</u></a>.
        All Rights Reserved. This documentation is under this <a href="http://www.steinberg.net/sdklicenses" target="_blank"><u>license</u></a>.
    </div>
</body>
</html>
