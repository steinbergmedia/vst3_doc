<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VST 3 SDK: [3.6.0] iOS Inter-App Audio support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxysmtg.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VST 3 SDK
   &#160;<span id="projectnumber">VST 3.7</span>
   </div>
   <div id="projectbrief">SDK for developing VST plug-in</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('interappaudio.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">[3.6.0] iOS Inter-App Audio support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#iaa_introduction">Introduction</a></li>
<li class="level1"><a href="#iaa_howto">How does it work?</a><ul><li class="level2"><a href="#iaa_howto1">Create and Setup the Xcode Project</a></li>
<li class="level2"><a href="#iaa_howto2">Add your Audio Component description to the Info.plist</a></li>
<li class="level2"><a href="#iaa_howto3">Add files to the project</a></li>
<li class="level2"><a href="#iaa_howto4">If using vstgui</a></li>
</ul>
</li>
<li class="level1"><a href="#iaa_codechanges">Code changes</a></li>
<li class="level1"><a href="#iaa_ui">UI Handling</a><ul><li class="level2"><a href="#iaa_editor">Creating a different UI when running on iOS</a></li>
<li class="level2"><a href="#iaa_ui_vstgui">Using VSTGUI</a></li>
<li class="level2"><a href="#iaa_ui_native">Using a native UIView</a></li>
<li class="level2"><a href="#iaa_host_ui">Host UI Integration</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>iOS InterApp-Audio Application out of your <b>VST 3 plug-in</b></p>
<h1><a class="anchor" id="iaa_introduction"></a>
Introduction</h1>
<p>The VST 3 SDK provides an easy way to create an iOS InterApp-Audio Application out of your <b>VST 3 plug-in</b>.</p>
<p>The SDK comes with an iOS VST 3 host application that can run standalone or as an Inter-App Audio slave. If your plug-in does not use any specific Windows or Mac OS X API's, it should be reasonably easy to get your plug-in running on iOS.</p>
<p>If you use VSTGUI4 with the VST3Editor class as your UI, you mainly only have to create a new UI description for the different device sizes.</p>
<h1><a class="anchor" id="iaa_howto"></a>
How does it work?</h1>
<h2><a class="anchor" id="iaa_howto1"></a>
Create and Setup the Xcode Project</h2>
<ul>
<li>Create a new iOS Application in Xcode. Use the "Empty Application" Template.</li>
<li>Use "C++11" as "C++ Language Dialect".</li>
<li>Activate "Objective-C Automatic Reference Counting".</li>
<li>Change the Bundle Identifier according to your registered AppID at Apple (see the Apple Documentation).</li>
<li>Activate the "Inter-App Audio" capability for the project.</li>
<li>Activate the "Background Modes" capability for the project and check the "Audio and Airplay" mode.</li>
<li>Change the "Header Search Path" configuration to add a path to the root of the VST 3 SDK.</li>
</ul>
<h2><a class="anchor" id="iaa_howto2"></a>
Add your Audio Component description to the Info.plist</h2>
<ul>
<li>Add a new Array with the name "AudioComponents".</li>
<li>Add a new Dictionary to the array.</li>
<li>Add the following keys to the dictionary: manufacturer, name, type, subtype, version.</li>
<li>Set the values of these keys:</li>
<li>The manufacturer value must be the one registered with Apple (the one you use for AudioUnits).</li>
<li>The type value must be either 'aurx' (Effect), 'aurm' (Effect with MIDI), 'aurg' (Generator) or 'auri' (Instrument).</li>
<li>The version value must be 1.</li>
</ul>
<h2><a class="anchor" id="iaa_howto3"></a>
Add files to the project</h2>
<ul>
<li>all the sources from your VST 3 plug-in project</li>
<li>all files from public.sdk/source/vst/interappaudio/</li>
<li>all files from public.sdk/source/vst/hosting</li>
<li>all files from base/source/ (if not already done previously)</li>
<li>public.sdk/source/vst/auwrapper/NSDataIBStream.mm (if not already done previously)</li>
</ul>
<h2><a class="anchor" id="iaa_howto4"></a>
If using vstgui</h2>
<ul>
<li>add vstgui_ios.mm</li>
<li>add vstgui_uidescription_ios.mm</li>
</ul>
<h1><a class="anchor" id="iaa_codechanges"></a>
Code changes</h1>
<p>Xcode created some files for you when you created the project. One of it is the App Delegate. You need to change the base class from NSResponder&lt;UIApplicationDelegate&gt; to <a class="el" href="interfaceVSTInterAppAudioAppDelegateBase.html" title="Base UIApplicationDelegate class.">VSTInterAppAudioAppDelegateBase</a> (you need to import its header file which is here : public.sdk/source/vst/interappaudio/VSTInterAppAudioAppDelegateBase.h) and then remove all methods from it. If you want to add some custom behavior to your app, you should do it in your App Delegate class implementation. For example, if you want to only allow landscape mode, you have to add this method: </p><div class="fragment"><div class="line"><span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line">- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> UIInterfaceOrientationMaskLandscapeLeft|UIInterfaceOrientationMaskLandscapeRight;</div>
<div class="line">}</div>
</div><!-- fragment --><p> Make sure to call the super method if you override one of the methods implemented by <a class="el" href="interfaceVSTInterAppAudioAppDelegateBase.html" title="Base UIApplicationDelegate class.">VSTInterAppAudioAppDelegateBase</a> (see the header which one are implemented).</p>
<h1><a class="anchor" id="iaa_ui"></a>
UI Handling</h1>
<h2><a class="anchor" id="iaa_editor"></a>
Creating a different UI when running on iOS</h2>
<p>To create a different view for iOS, you can check the host context for the IInterAppAudioWrapper interface: </p><div class="fragment"><div class="line"><span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line">IPlugView* PLUGIN_API MyEditController::createView (FIDString _name)</div>
<div class="line">{</div>
<div class="line">  ConstString name (_name);</div>
<div class="line">  <span class="keywordflow">if</span> (name == ViewType::kEditor)</div>
<div class="line">  {</div>
<div class="line">    FUnknownPtr&lt;IInterAppAudioHost&gt; interAudioApp (getHostContext ());</div>
<div class="line">    <span class="keywordflow">if</span> (interAudioApp)</div>
<div class="line">    {</div>
<div class="line">      <span class="comment">// create and return the view for iOS</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">      <span class="comment">// create and return the view for Windows/macOSX</span></div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="iaa_ui_vstgui"></a>
Using VSTGUI</h2>
<p><a class="el" href="namespaceVSTGUI.html">VSTGUI</a> 4.3 or higher includes support for iOS. You can use it the same like you use it for Windows or Mac OS X. See the <a class="el" href="namespaceVSTGUI.html">VSTGUI</a> documentation for some limitations.</p>
<h2><a class="anchor" id="iaa_ui_native"></a>
Using a native UIView</h2>
<p>If you want to create a native UIView as your plug-in editor, you have to create your own IPlugView derivate and attach the UIView in the IPlugView::attached method. An example of this can be seen in public.sdk/samples/vst/adelay/interappaudio/iosEditor.mm</p>
<h2><a class="anchor" id="iaa_host_ui"></a>
Host UI Integration</h2>
<p>The example project in public.sdk/samples/vst/InterAppAudio uses a custom solution to show the UI for controlling and switching to the host application. You should take this as an example if you want to add it this way. You can also use the UI Apple provides with the its example source for Inter-App Audio.</p>
<p>But you can also implement the host UI integration into your plug-in view. Your edit controller will get an interface to IInterAppAudioHost via its initialize method which you can use to get the host icon and send commands or switch to the host. If you use this method to show the host controls you should implement the IInterAppAudioConnectionNotification interface in your edit controller to conditionally show or hide the controls depending on the connection state. <br  />
<br  />
</p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<html>
    <head>
	    <title>Empty</title>
	    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	    <meta name="Author" content="Steinberg">
    </head>
    <body>
    <br/>
    <hr width="100%" size="2" align="left" />
    <div align=right>
        Copyright &copy;2020 <a href="http://www.steinberg.net" target="_blank"><u>Steinberg Media Technologies GmbH</u></a>.
        All Rights Reserved. This documentation is under this <a href="http://www.steinberg.net/sdklicenses" target="_blank"><u>license</u></a>.
    </div>
</body>
</html>
